"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./node_modules/uuid/dist/esm-browser/native.js":
/*!******************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/native.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ randomUUID });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0EsaUVBQWUsRUFBRSxZQUFZLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNtaW5pL0RvY3VtZW50cy9Qcm9qZWN0cy9TYWFTIEZhY3RvcnkvdWkvbmV4dGpzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvbmF0aXZlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7IHJhbmRvbVVVSUQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/uuid/dist/esm-browser/native.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/uuid/dist/esm-browser/regex.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/regex.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9yZWdleC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxHQUFHLDhFQUE4RSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvbWFjbWluaS9Eb2N1bWVudHMvUHJvamVjdHMvU2FhUyBGYWN0b3J5L3VpL25leHRqcy9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtOF1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwfGZmZmZmZmZmLWZmZmYtZmZmZi1mZmZmLWZmZmZmZmZmZmZmZikkL2k7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/uuid/dist/esm-browser/regex.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/uuid/dist/esm-browser/rng.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/rng.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ rng)\n/* harmony export */ });\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nfunction rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNtaW5pL0RvY3VtZW50cy9Qcm9qZWN0cy9TYWFTIEZhY3RvcnkvdWkvbmV4dGpzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgICBpZiAodHlwZW9mIGNyeXB0byA9PT0gJ3VuZGVmaW5lZCcgfHwgIWNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBnZXRSYW5kb21WYWx1ZXMgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/uuid/dist/esm-browser/rng.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/uuid/dist/esm-browser/stringify.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)\n/* harmony export */ });\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(middleware)/./node_modules/uuid/dist/esm-browser/validate.js\");\n\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zdHJpbmdpZnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ3JDO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0RBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxTQUFTLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNtaW5pL0RvY3VtZW50cy9Qcm9qZWN0cy9TYWFTIEZhY3RvcnkvdWkvbmV4dGpzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICAgIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAgIHJldHVybiAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArXG4gICAgICAgIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gK1xuICAgICAgICAnLScgK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArXG4gICAgICAgIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArXG4gICAgICAgICctJyArXG4gICAgICAgIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICtcbiAgICAgICAgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gK1xuICAgICAgICAnLScgK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gK1xuICAgICAgICBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gICAgY29uc3QgdXVpZCA9IHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCk7XG4gICAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdXVpZDtcbn1cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/uuid/dist/esm-browser/stringify.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/uuid/dist/esm-browser/v4.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v4.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ \"(middleware)/./node_modules/uuid/dist/esm-browser/native.js\");\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ \"(middleware)/./node_modules/uuid/dist/esm-browser/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ \"(middleware)/./node_modules/uuid/dist/esm-browser/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n    if (_native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID && !buf && !options) {\n        return _native_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? (0,_rng_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ047QUFDc0I7QUFDakQ7QUFDQSxRQUFRLGtEQUFNO0FBQ2QsZUFBZSxrREFBTTtBQUNyQjtBQUNBO0FBQ0Esc0RBQXNELG1EQUFHO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsT0FBTyxHQUFHLGFBQWE7QUFDM0U7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsOERBQWU7QUFDMUI7QUFDQSxpRUFBZSxFQUFFLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNtaW5pL0RvY3VtZW50cy9Qcm9qZWN0cy9TYWFTIEZhY3RvcnkvdWkvbmV4dGpzL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5qcyc7XG5pbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgaWYgKG5hdGl2ZS5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSA/PyBvcHRpb25zLnJuZz8uKCkgPz8gcm5nKCk7XG4gICAgaWYgKHJuZHMubGVuZ3RoIDwgMTYpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYW5kb20gYnl0ZXMgbGVuZ3RoIG11c3QgYmUgPj0gMTYnKTtcbiAgICB9XG4gICAgcm5kc1s2XSA9IChybmRzWzZdICYgMHgwZikgfCAweDQwO1xuICAgIHJuZHNbOF0gPSAocm5kc1s4XSAmIDB4M2YpIHwgMHg4MDtcbiAgICBpZiAoYnVmKSB7XG4gICAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgICAgICBpZiAob2Zmc2V0IDwgMCB8fCBvZmZzZXQgKyAxNiA+IGJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVVUlEIGJ5dGUgcmFuZ2UgJHtvZmZzZXR9OiR7b2Zmc2V0ICsgMTV9IGlzIG91dCBvZiBidWZmZXIgYm91bmRzYCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICAgICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWY7XG4gICAgfVxuICAgIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5leHBvcnQgZGVmYXVsdCB2NDtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/uuid/dist/esm-browser/v4.js\n");

/***/ }),

/***/ "(middleware)/./node_modules/uuid/dist/esm-browser/validate.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/validate.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(middleware)/./node_modules/uuid/dist/esm-browser/regex.js\");\n\nfunction validate(uuid) {\n    return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjtBQUMvQjtBQUNBLHVDQUF1QyxpREFBSztBQUM1QztBQUNBLGlFQUFlLFFBQVEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL21hY21pbmkvRG9jdW1lbnRzL1Byb2plY3RzL1NhYVMgRmFjdG9yeS91aS9uZXh0anMvbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92YWxpZGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUkVHRVggZnJvbSAnLi9yZWdleC5qcyc7XG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyAmJiBSRUdFWC50ZXN0KHV1aWQpO1xufVxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./node_modules/uuid/dist/esm-browser/validate.js\n");

/***/ }),

/***/ "(middleware)/./src/lib/correlation-id.ts":
/*!***********************************!*\
  !*** ./src/lib/correlation-id.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CorrelationIDManager: () => (/* binding */ CorrelationIDManager),\n/* harmony export */   correlationIDManager: () => (/* binding */ correlationIDManager),\n/* harmony export */   fetchWithCorrelation: () => (/* binding */ fetchWithCorrelation),\n/* harmony export */   getCorrelationHeaders: () => (/* binding */ getCorrelationHeaders),\n/* harmony export */   useCorrelationID: () => (/* binding */ useCorrelationID)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(middleware)/./node_modules/uuid/dist/esm-browser/v4.js\");\n\n// Global correlation context\nlet globalCorrelationContext = null;\n// Correlation ID manager\nclass CorrelationIDManager {\n    static getInstance() {\n        if (!CorrelationIDManager.instance) {\n            CorrelationIDManager.instance = new CorrelationIDManager();\n        }\n        return CorrelationIDManager.instance;\n    }\n    // Generate a new correlation context\n    generateContext(parentId, userId, tenantId, sessionId, metadata = {}) {\n        const correlationId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const requestId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const spanId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const traceId = parentId || (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const context = {\n            correlationId,\n            requestId,\n            parentId,\n            spanId,\n            traceId,\n            userId,\n            tenantId,\n            sessionId,\n            timestamp: Date.now(),\n            metadata: {\n                service: 'frontend',\n                version: process.env.NEXT_PUBLIC_APP_VERSION || '1.0.0',\n                environment: \"development\" || 0,\n                ...metadata\n            }\n        };\n        this.contextMap.set(correlationId, context);\n        globalCorrelationContext = context;\n        return context;\n    }\n    // Get current correlation context\n    getCurrentContext() {\n        return globalCorrelationContext;\n    }\n    // Get context by correlation ID\n    getContext(correlationId) {\n        return this.contextMap.get(correlationId) || null;\n    }\n    // Set current context\n    setCurrentContext(context) {\n        globalCorrelationContext = context;\n        this.contextMap.set(context.correlationId, context);\n    }\n    // Clear current context\n    clearCurrentContext() {\n        globalCorrelationContext = null;\n    }\n    // Propagate correlation ID to headers\n    getHeaders() {\n        const context = this.getCurrentContext();\n        if (!context) return {};\n        return {\n            'X-Correlation-ID': context.correlationId,\n            'X-Request-ID': context.requestId,\n            'X-Span-ID': context.spanId,\n            'X-Trace-ID': context.traceId,\n            'X-Parent-ID': context.parentId || '',\n            'X-User-ID': context.userId || '',\n            'X-Tenant-ID': context.tenantId || '',\n            'X-Session-ID': context.sessionId || '',\n            'X-Timestamp': context.timestamp.toString(),\n            'X-Service': 'frontend'\n        };\n    }\n    // Extract correlation ID from headers\n    extractFromHeaders(headers) {\n        const correlationId = headers['x-correlation-id'] || headers['X-Correlation-ID'];\n        if (!correlationId) return null;\n        const context = this.getContext(correlationId);\n        if (context) {\n            this.setCurrentContext(context);\n            return context;\n        }\n        // Create new context from headers, preserving the incoming correlation ID\n        const newContext = {\n            correlationId: correlationId,\n            requestId: headers['x-request-id'] || headers['X-Request-ID'] || (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            parentId: headers['x-parent-id'] || headers['X-Parent-ID'] || undefined,\n            spanId: headers['x-span-id'] || headers['X-Span-ID'] || (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            traceId: headers['x-trace-id'] || headers['X-Trace-ID'] || correlationId,\n            userId: headers['x-user-id'] || headers['X-User-ID'] || undefined,\n            tenantId: headers['x-tenant-id'] || headers['X-Tenant-ID'] || undefined,\n            sessionId: headers['x-session-id'] || headers['X-Session-ID'] || undefined,\n            timestamp: parseInt(headers['x-timestamp'] || headers['X-Timestamp'] || Date.now().toString()),\n            metadata: {\n                service: headers['x-service'] || headers['X-Service'] || 'unknown',\n                version: process.env.NEXT_PUBLIC_APP_VERSION || '1.0.0',\n                environment: \"development\" || 0\n            }\n        };\n        this.setCurrentContext(newContext);\n        return newContext;\n    }\n    // Create child span\n    createChildSpan(metadata = {}) {\n        const parentContext = this.getCurrentContext();\n        if (!parentContext) {\n            return this.generateContext(undefined, undefined, undefined, undefined, metadata);\n        }\n        const childContext = {\n            ...parentContext,\n            requestId: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            spanId: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            parentId: parentContext.spanId,\n            timestamp: Date.now(),\n            metadata: {\n                ...parentContext.metadata,\n                ...metadata,\n                parentSpanId: parentContext.spanId\n            }\n        };\n        this.contextMap.set(childContext.correlationId, childContext);\n        return childContext;\n    }\n    // Log correlation context\n    logContext(context, level = 'info') {\n        const logData = {\n            level,\n            correlationId: context.correlationId,\n            requestId: context.requestId,\n            spanId: context.spanId,\n            traceId: context.traceId,\n            parentId: context.parentId,\n            userId: context.userId,\n            tenantId: context.tenantId,\n            sessionId: context.sessionId,\n            timestamp: context.timestamp,\n            metadata: context.metadata\n        };\n        switch(level){\n            case 'error':\n                console.error('🔗 Correlation Context:', logData);\n                break;\n            case 'warn':\n                console.warn('🔗 Correlation Context:', logData);\n                break;\n            default:\n                console.log('🔗 Correlation Context:', logData);\n        }\n    }\n    // Get all contexts for a trace\n    getTraceContexts(traceId) {\n        return Array.from(this.contextMap.values()).filter((context)=>context.traceId === traceId);\n    }\n    // Clean up old contexts (older than 1 hour)\n    cleanup() {\n        const oneHourAgo = Date.now() - 60 * 60 * 1000;\n        for (const [correlationId, context] of this.contextMap.entries()){\n            if (context.timestamp < oneHourAgo) {\n                this.contextMap.delete(correlationId);\n            }\n        }\n    }\n    constructor(){\n        this.contextMap = new Map();\n    }\n}\n// Export singleton instance\nconst correlationIDManager = CorrelationIDManager.getInstance();\n// React hook for correlation ID\nfunction useCorrelationID() {\n    const context = correlationIDManager.getCurrentContext();\n    const generateNew = (parentId, userId, tenantId, sessionId, metadata)=>{\n        return correlationIDManager.generateContext(parentId, userId, tenantId, sessionId, metadata);\n    };\n    const getHeaders = ()=>correlationIDManager.getHeaders();\n    const logContext = (level = 'info')=>{\n        if (context) correlationIDManager.logContext(context, level);\n    };\n    return {\n        context,\n        generateNew,\n        getHeaders,\n        logContext,\n        correlationId: context?.correlationId,\n        requestId: context?.requestId,\n        spanId: context?.spanId,\n        traceId: context?.traceId\n    };\n}\n// Utility function to add correlation headers to fetch requests\nfunction fetchWithCorrelation(url, options = {}) {\n    const headers = correlationIDManager.getHeaders();\n    const enhancedOptions = {\n        ...options,\n        headers: {\n            ...headers,\n            ...options.headers\n        }\n    };\n    return fetch(url, enhancedOptions);\n}\n// Utility function to add correlation headers to axios requests\nfunction getCorrelationHeaders() {\n    return correlationIDManager.getHeaders();\n}\n// Auto-cleanup every hour\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixVQUFVO0FBQ3hDO0FBRUEsMEJBQTBCO0FBQzFCLElBQUksS0FBNkIsRUFBRSxFQUlsQyIsInNvdXJjZXMiOlsiL1VzZXJzL21hY21pbmkvRG9jdW1lbnRzL1Byb2plY3RzL1NhYVMgRmFjdG9yeS91aS9uZXh0anMvc3JjL2xpYi9jb3JyZWxhdGlvbi1pZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJ1xuXG4vLyBDb3JyZWxhdGlvbiBJRCBjb250ZXh0IGZvciByZXF1ZXN0IHRyYWNpbmdcbmV4cG9ydCBpbnRlcmZhY2UgQ29ycmVsYXRpb25Db250ZXh0IHtcbiAgY29ycmVsYXRpb25JZDogc3RyaW5nXG4gIHJlcXVlc3RJZDogc3RyaW5nXG4gIHBhcmVudElkPzogc3RyaW5nXG4gIHNwYW5JZDogc3RyaW5nXG4gIHRyYWNlSWQ6IHN0cmluZ1xuICB1c2VySWQ/OiBzdHJpbmdcbiAgdGVuYW50SWQ/OiBzdHJpbmdcbiAgc2Vzc2lvbklkPzogc3RyaW5nXG4gIHRpbWVzdGFtcDogbnVtYmVyXG4gIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbi8vIEdsb2JhbCBjb3JyZWxhdGlvbiBjb250ZXh0XG5sZXQgZ2xvYmFsQ29ycmVsYXRpb25Db250ZXh0OiBDb3JyZWxhdGlvbkNvbnRleHQgfCBudWxsID0gbnVsbFxuXG4vLyBDb3JyZWxhdGlvbiBJRCBtYW5hZ2VyXG5leHBvcnQgY2xhc3MgQ29ycmVsYXRpb25JRE1hbmFnZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQ29ycmVsYXRpb25JRE1hbmFnZXJcbiAgcHJpdmF0ZSBjb250ZXh0TWFwID0gbmV3IE1hcDxzdHJpbmcsIENvcnJlbGF0aW9uQ29udGV4dD4oKVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBDb3JyZWxhdGlvbklETWFuYWdlciB7XG4gICAgaWYgKCFDb3JyZWxhdGlvbklETWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgQ29ycmVsYXRpb25JRE1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgQ29ycmVsYXRpb25JRE1hbmFnZXIoKVxuICAgIH1cbiAgICByZXR1cm4gQ29ycmVsYXRpb25JRE1hbmFnZXIuaW5zdGFuY2VcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIGEgbmV3IGNvcnJlbGF0aW9uIGNvbnRleHRcbiAgZ2VuZXJhdGVDb250ZXh0KFxuICAgIHBhcmVudElkPzogc3RyaW5nLFxuICAgIHVzZXJJZD86IHN0cmluZyxcbiAgICB0ZW5hbnRJZD86IHN0cmluZyxcbiAgICBzZXNzaW9uSWQ/OiBzdHJpbmcsXG4gICAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICApOiBDb3JyZWxhdGlvbkNvbnRleHQge1xuICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSB1dWlkdjQoKVxuICAgIGNvbnN0IHJlcXVlc3RJZCA9IHV1aWR2NCgpXG4gICAgY29uc3Qgc3BhbklkID0gdXVpZHY0KClcbiAgICBjb25zdCB0cmFjZUlkID0gcGFyZW50SWQgfHwgdXVpZHY0KClcblxuICAgIGNvbnN0IGNvbnRleHQ6IENvcnJlbGF0aW9uQ29udGV4dCA9IHtcbiAgICAgIGNvcnJlbGF0aW9uSWQsXG4gICAgICByZXF1ZXN0SWQsXG4gICAgICBwYXJlbnRJZCxcbiAgICAgIHNwYW5JZCxcbiAgICAgIHRyYWNlSWQsXG4gICAgICB1c2VySWQsXG4gICAgICB0ZW5hbnRJZCxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHNlcnZpY2U6ICdmcm9udGVuZCcsXG4gICAgICAgIHZlcnNpb246IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9WRVJTSU9OIHx8ICcxLjAuMCcsXG4gICAgICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgICAgICAuLi5tZXRhZGF0YVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY29udGV4dE1hcC5zZXQoY29ycmVsYXRpb25JZCwgY29udGV4dClcbiAgICBnbG9iYWxDb3JyZWxhdGlvbkNvbnRleHQgPSBjb250ZXh0XG5cbiAgICByZXR1cm4gY29udGV4dFxuICB9XG5cbiAgLy8gR2V0IGN1cnJlbnQgY29ycmVsYXRpb24gY29udGV4dFxuICBnZXRDdXJyZW50Q29udGV4dCgpOiBDb3JyZWxhdGlvbkNvbnRleHQgfCBudWxsIHtcbiAgICByZXR1cm4gZ2xvYmFsQ29ycmVsYXRpb25Db250ZXh0XG4gIH1cblxuICAvLyBHZXQgY29udGV4dCBieSBjb3JyZWxhdGlvbiBJRFxuICBnZXRDb250ZXh0KGNvcnJlbGF0aW9uSWQ6IHN0cmluZyk6IENvcnJlbGF0aW9uQ29udGV4dCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRNYXAuZ2V0KGNvcnJlbGF0aW9uSWQpIHx8IG51bGxcbiAgfVxuXG4gIC8vIFNldCBjdXJyZW50IGNvbnRleHRcbiAgc2V0Q3VycmVudENvbnRleHQoY29udGV4dDogQ29ycmVsYXRpb25Db250ZXh0KTogdm9pZCB7XG4gICAgZ2xvYmFsQ29ycmVsYXRpb25Db250ZXh0ID0gY29udGV4dFxuICAgIHRoaXMuY29udGV4dE1hcC5zZXQoY29udGV4dC5jb3JyZWxhdGlvbklkLCBjb250ZXh0KVxuICB9XG5cbiAgLy8gQ2xlYXIgY3VycmVudCBjb250ZXh0XG4gIGNsZWFyQ3VycmVudENvbnRleHQoKTogdm9pZCB7XG4gICAgZ2xvYmFsQ29ycmVsYXRpb25Db250ZXh0ID0gbnVsbFxuICB9XG5cbiAgLy8gUHJvcGFnYXRlIGNvcnJlbGF0aW9uIElEIHRvIGhlYWRlcnNcbiAgZ2V0SGVhZGVycygpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5nZXRDdXJyZW50Q29udGV4dCgpXG4gICAgaWYgKCFjb250ZXh0KSByZXR1cm4ge31cblxuICAgIHJldHVybiB7XG4gICAgICAnWC1Db3JyZWxhdGlvbi1JRCc6IGNvbnRleHQuY29ycmVsYXRpb25JZCxcbiAgICAgICdYLVJlcXVlc3QtSUQnOiBjb250ZXh0LnJlcXVlc3RJZCxcbiAgICAgICdYLVNwYW4tSUQnOiBjb250ZXh0LnNwYW5JZCxcbiAgICAgICdYLVRyYWNlLUlEJzogY29udGV4dC50cmFjZUlkLFxuICAgICAgJ1gtUGFyZW50LUlEJzogY29udGV4dC5wYXJlbnRJZCB8fCAnJyxcbiAgICAgICdYLVVzZXItSUQnOiBjb250ZXh0LnVzZXJJZCB8fCAnJyxcbiAgICAgICdYLVRlbmFudC1JRCc6IGNvbnRleHQudGVuYW50SWQgfHwgJycsXG4gICAgICAnWC1TZXNzaW9uLUlEJzogY29udGV4dC5zZXNzaW9uSWQgfHwgJycsXG4gICAgICAnWC1UaW1lc3RhbXAnOiBjb250ZXh0LnRpbWVzdGFtcC50b1N0cmluZygpLFxuICAgICAgJ1gtU2VydmljZSc6ICdmcm9udGVuZCdcbiAgICB9XG4gIH1cblxuICAvLyBFeHRyYWN0IGNvcnJlbGF0aW9uIElEIGZyb20gaGVhZGVyc1xuICBleHRyYWN0RnJvbUhlYWRlcnMoaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IENvcnJlbGF0aW9uQ29udGV4dCB8IG51bGwge1xuICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSBoZWFkZXJzWyd4LWNvcnJlbGF0aW9uLWlkJ10gfHwgaGVhZGVyc1snWC1Db3JyZWxhdGlvbi1JRCddXG4gICAgaWYgKCFjb3JyZWxhdGlvbklkKSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dChjb3JyZWxhdGlvbklkKVxuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICB0aGlzLnNldEN1cnJlbnRDb250ZXh0KGNvbnRleHQpXG4gICAgICByZXR1cm4gY29udGV4dFxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgY29udGV4dCBmcm9tIGhlYWRlcnMsIHByZXNlcnZpbmcgdGhlIGluY29taW5nIGNvcnJlbGF0aW9uIElEXG4gICAgY29uc3QgbmV3Q29udGV4dDogQ29ycmVsYXRpb25Db250ZXh0ID0ge1xuICAgICAgY29ycmVsYXRpb25JZDogY29ycmVsYXRpb25JZCwgLy8gVXNlIHRoZSBpbmNvbWluZyBjb3JyZWxhdGlvbiBJRFxuICAgICAgcmVxdWVzdElkOiBoZWFkZXJzWyd4LXJlcXVlc3QtaWQnXSB8fCBoZWFkZXJzWydYLVJlcXVlc3QtSUQnXSB8fCB1dWlkdjQoKSxcbiAgICAgIHBhcmVudElkOiBoZWFkZXJzWyd4LXBhcmVudC1pZCddIHx8IGhlYWRlcnNbJ1gtUGFyZW50LUlEJ10gfHwgdW5kZWZpbmVkLFxuICAgICAgc3BhbklkOiBoZWFkZXJzWyd4LXNwYW4taWQnXSB8fCBoZWFkZXJzWydYLVNwYW4tSUQnXSB8fCB1dWlkdjQoKSxcbiAgICAgIHRyYWNlSWQ6IGhlYWRlcnNbJ3gtdHJhY2UtaWQnXSB8fCBoZWFkZXJzWydYLVRyYWNlLUlEJ10gfHwgY29ycmVsYXRpb25JZCxcbiAgICAgIHVzZXJJZDogaGVhZGVyc1sneC11c2VyLWlkJ10gfHwgaGVhZGVyc1snWC1Vc2VyLUlEJ10gfHwgdW5kZWZpbmVkLFxuICAgICAgdGVuYW50SWQ6IGhlYWRlcnNbJ3gtdGVuYW50LWlkJ10gfHwgaGVhZGVyc1snWC1UZW5hbnQtSUQnXSB8fCB1bmRlZmluZWQsXG4gICAgICBzZXNzaW9uSWQ6IGhlYWRlcnNbJ3gtc2Vzc2lvbi1pZCddIHx8IGhlYWRlcnNbJ1gtU2Vzc2lvbi1JRCddIHx8IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogcGFyc2VJbnQoaGVhZGVyc1sneC10aW1lc3RhbXAnXSB8fCBoZWFkZXJzWydYLVRpbWVzdGFtcCddIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSksXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBzZXJ2aWNlOiBoZWFkZXJzWyd4LXNlcnZpY2UnXSB8fCBoZWFkZXJzWydYLVNlcnZpY2UnXSB8fCAndW5rbm93bicsXG4gICAgICAgIHZlcnNpb246IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9WRVJTSU9OIHx8ICcxLjAuMCcsXG4gICAgICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRDdXJyZW50Q29udGV4dChuZXdDb250ZXh0KVxuICAgIHJldHVybiBuZXdDb250ZXh0XG4gIH1cblxuICAvLyBDcmVhdGUgY2hpbGQgc3BhblxuICBjcmVhdGVDaGlsZFNwYW4obWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSk6IENvcnJlbGF0aW9uQ29udGV4dCB7XG4gICAgY29uc3QgcGFyZW50Q29udGV4dCA9IHRoaXMuZ2V0Q3VycmVudENvbnRleHQoKVxuICAgIGlmICghcGFyZW50Q29udGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDb250ZXh0KHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWV0YWRhdGEpXG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRDb250ZXh0OiBDb3JyZWxhdGlvbkNvbnRleHQgPSB7XG4gICAgICAuLi5wYXJlbnRDb250ZXh0LFxuICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgIHNwYW5JZDogdXVpZHY0KCksXG4gICAgICBwYXJlbnRJZDogcGFyZW50Q29udGV4dC5zcGFuSWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICAuLi5wYXJlbnRDb250ZXh0Lm1ldGFkYXRhLFxuICAgICAgICAuLi5tZXRhZGF0YSxcbiAgICAgICAgcGFyZW50U3BhbklkOiBwYXJlbnRDb250ZXh0LnNwYW5JZFxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY29udGV4dE1hcC5zZXQoY2hpbGRDb250ZXh0LmNvcnJlbGF0aW9uSWQsIGNoaWxkQ29udGV4dClcbiAgICByZXR1cm4gY2hpbGRDb250ZXh0XG4gIH1cblxuICAvLyBMb2cgY29ycmVsYXRpb24gY29udGV4dFxuICBsb2dDb250ZXh0KGNvbnRleHQ6IENvcnJlbGF0aW9uQ29udGV4dCwgbGV2ZWw6ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSAnaW5mbycpOiB2b2lkIHtcbiAgICBjb25zdCBsb2dEYXRhID0ge1xuICAgICAgbGV2ZWwsXG4gICAgICBjb3JyZWxhdGlvbklkOiBjb250ZXh0LmNvcnJlbGF0aW9uSWQsXG4gICAgICByZXF1ZXN0SWQ6IGNvbnRleHQucmVxdWVzdElkLFxuICAgICAgc3BhbklkOiBjb250ZXh0LnNwYW5JZCxcbiAgICAgIHRyYWNlSWQ6IGNvbnRleHQudHJhY2VJZCxcbiAgICAgIHBhcmVudElkOiBjb250ZXh0LnBhcmVudElkLFxuICAgICAgdXNlcklkOiBjb250ZXh0LnVzZXJJZCxcbiAgICAgIHRlbmFudElkOiBjb250ZXh0LnRlbmFudElkLFxuICAgICAgc2Vzc2lvbklkOiBjb250ZXh0LnNlc3Npb25JZCxcbiAgICAgIHRpbWVzdGFtcDogY29udGV4dC50aW1lc3RhbXAsXG4gICAgICBtZXRhZGF0YTogY29udGV4dC5tZXRhZGF0YVxuICAgIH1cblxuICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+UlyBDb3JyZWxhdGlvbiBDb250ZXh0OicsIGxvZ0RhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgY29uc29sZS53YXJuKCfwn5SXIENvcnJlbGF0aW9uIENvbnRleHQ6JywgbG9nRGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SXIENvcnJlbGF0aW9uIENvbnRleHQ6JywgbG9nRGF0YSlcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgYWxsIGNvbnRleHRzIGZvciBhIHRyYWNlXG4gIGdldFRyYWNlQ29udGV4dHModHJhY2VJZDogc3RyaW5nKTogQ29ycmVsYXRpb25Db250ZXh0W10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29udGV4dE1hcC52YWx1ZXMoKSkuZmlsdGVyKGNvbnRleHQgPT4gY29udGV4dC50cmFjZUlkID09PSB0cmFjZUlkKVxuICB9XG5cbiAgLy8gQ2xlYW4gdXAgb2xkIGNvbnRleHRzIChvbGRlciB0aGFuIDEgaG91cilcbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICBjb25zdCBvbmVIb3VyQWdvID0gRGF0ZS5ub3coKSAtICg2MCAqIDYwICogMTAwMClcbiAgICBmb3IgKGNvbnN0IFtjb3JyZWxhdGlvbklkLCBjb250ZXh0XSBvZiB0aGlzLmNvbnRleHRNYXAuZW50cmllcygpKSB7XG4gICAgICBpZiAoY29udGV4dC50aW1lc3RhbXAgPCBvbmVIb3VyQWdvKSB7XG4gICAgICAgIHRoaXMuY29udGV4dE1hcC5kZWxldGUoY29ycmVsYXRpb25JZClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGNvcnJlbGF0aW9uSURNYW5hZ2VyID0gQ29ycmVsYXRpb25JRE1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuXG4vLyBSZWFjdCBob29rIGZvciBjb3JyZWxhdGlvbiBJRFxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvcnJlbGF0aW9uSUQoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSBjb3JyZWxhdGlvbklETWFuYWdlci5nZXRDdXJyZW50Q29udGV4dCgpXG4gIFxuICBjb25zdCBnZW5lcmF0ZU5ldyA9IChcbiAgICBwYXJlbnRJZD86IHN0cmluZyxcbiAgICB1c2VySWQ/OiBzdHJpbmcsXG4gICAgdGVuYW50SWQ/OiBzdHJpbmcsXG4gICAgc2Vzc2lvbklkPzogc3RyaW5nLFxuICAgIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxuICApID0+IHtcbiAgICByZXR1cm4gY29ycmVsYXRpb25JRE1hbmFnZXIuZ2VuZXJhdGVDb250ZXh0KHBhcmVudElkLCB1c2VySWQsIHRlbmFudElkLCBzZXNzaW9uSWQsIG1ldGFkYXRhKVxuICB9XG5cbiAgY29uc3QgZ2V0SGVhZGVycyA9ICgpID0+IGNvcnJlbGF0aW9uSURNYW5hZ2VyLmdldEhlYWRlcnMoKVxuICBjb25zdCBsb2dDb250ZXh0ID0gKGxldmVsOiAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InID0gJ2luZm8nKSA9PiB7XG4gICAgaWYgKGNvbnRleHQpIGNvcnJlbGF0aW9uSURNYW5hZ2VyLmxvZ0NvbnRleHQoY29udGV4dCwgbGV2ZWwpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvbnRleHQsXG4gICAgZ2VuZXJhdGVOZXcsXG4gICAgZ2V0SGVhZGVycyxcbiAgICBsb2dDb250ZXh0LFxuICAgIGNvcnJlbGF0aW9uSWQ6IGNvbnRleHQ/LmNvcnJlbGF0aW9uSWQsXG4gICAgcmVxdWVzdElkOiBjb250ZXh0Py5yZXF1ZXN0SWQsXG4gICAgc3BhbklkOiBjb250ZXh0Py5zcGFuSWQsXG4gICAgdHJhY2VJZDogY29udGV4dD8udHJhY2VJZFxuICB9XG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gYWRkIGNvcnJlbGF0aW9uIGhlYWRlcnMgdG8gZmV0Y2ggcmVxdWVzdHNcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFdpdGhDb3JyZWxhdGlvbihcbiAgdXJsOiBzdHJpbmcsXG4gIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge31cbik6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgY29uc3QgaGVhZGVycyA9IGNvcnJlbGF0aW9uSURNYW5hZ2VyLmdldEhlYWRlcnMoKVxuICBcbiAgY29uc3QgZW5oYW5jZWRPcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIC4uLmhlYWRlcnMsXG4gICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmV0Y2godXJsLCBlbmhhbmNlZE9wdGlvbnMpXG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gYWRkIGNvcnJlbGF0aW9uIGhlYWRlcnMgdG8gYXhpb3MgcmVxdWVzdHNcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JyZWxhdGlvbkhlYWRlcnMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gIHJldHVybiBjb3JyZWxhdGlvbklETWFuYWdlci5nZXRIZWFkZXJzKClcbn1cblxuLy8gQXV0by1jbGVhbnVwIGV2ZXJ5IGhvdXJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgY29ycmVsYXRpb25JRE1hbmFnZXIuY2xlYW51cCgpXG4gIH0sIDYwICogNjAgKiAxMDAwKSAvLyAxIGhvdXJcbn1cbiJdLCJuYW1lcyI6WyJ2NCIsInV1aWR2NCIsImdsb2JhbENvcnJlbGF0aW9uQ29udGV4dCIsIkNvcnJlbGF0aW9uSURNYW5hZ2VyIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImdlbmVyYXRlQ29udGV4dCIsInBhcmVudElkIiwidXNlcklkIiwidGVuYW50SWQiLCJzZXNzaW9uSWQiLCJtZXRhZGF0YSIsImNvcnJlbGF0aW9uSWQiLCJyZXF1ZXN0SWQiLCJzcGFuSWQiLCJ0cmFjZUlkIiwiY29udGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJzZXJ2aWNlIiwidmVyc2lvbiIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUFBfVkVSU0lPTiIsImVudmlyb25tZW50IiwiY29udGV4dE1hcCIsInNldCIsImdldEN1cnJlbnRDb250ZXh0IiwiZ2V0Q29udGV4dCIsImdldCIsInNldEN1cnJlbnRDb250ZXh0IiwiY2xlYXJDdXJyZW50Q29udGV4dCIsImdldEhlYWRlcnMiLCJ0b1N0cmluZyIsImV4dHJhY3RGcm9tSGVhZGVycyIsImhlYWRlcnMiLCJuZXdDb250ZXh0IiwidW5kZWZpbmVkIiwicGFyc2VJbnQiLCJjcmVhdGVDaGlsZFNwYW4iLCJwYXJlbnRDb250ZXh0IiwiY2hpbGRDb250ZXh0IiwicGFyZW50U3BhbklkIiwibG9nQ29udGV4dCIsImxldmVsIiwibG9nRGF0YSIsImNvbnNvbGUiLCJlcnJvciIsIndhcm4iLCJsb2ciLCJnZXRUcmFjZUNvbnRleHRzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiZmlsdGVyIiwiY2xlYW51cCIsIm9uZUhvdXJBZ28iLCJlbnRyaWVzIiwiZGVsZXRlIiwiTWFwIiwiY29ycmVsYXRpb25JRE1hbmFnZXIiLCJ1c2VDb3JyZWxhdGlvbklEIiwiZ2VuZXJhdGVOZXciLCJmZXRjaFdpdGhDb3JyZWxhdGlvbiIsInVybCIsIm9wdGlvbnMiLCJlbmhhbmNlZE9wdGlvbnMiLCJmZXRjaCIsImdldENvcnJlbGF0aW9uSGVhZGVycyIsInNldEludGVydmFsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/lib/correlation-id.ts\n");

/***/ }),

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/correlation-id */ \"(middleware)/./src/lib/correlation-id.ts\");\n\n\nfunction middleware(request) {\n    // Extract correlation ID from incoming request headers\n    const headers = Object.fromEntries(request.headers.entries());\n    const correlationContext = _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.extractFromHeaders(headers);\n    // If no correlation context exists, create one\n    if (!correlationContext) {\n        _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.generateContext(undefined, undefined, undefined, undefined, {\n            operation: 'http_request',\n            path: request.nextUrl.pathname,\n            method: request.method,\n            userAgent: headers['user-agent'],\n            referer: headers['referer']\n        });\n    }\n    // Clone the request headers to add correlation IDs\n    const requestHeaders = new Headers(request.headers);\n    const correlationHeaders = _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.getHeaders();\n    // Add correlation headers to the request\n    Object.entries(correlationHeaders).forEach(([key, value])=>{\n        if (value) {\n            requestHeaders.set(key, value);\n        }\n    });\n    // Create a new request with correlation headers\n    const enhancedRequest = new next_server__WEBPACK_IMPORTED_MODULE_0__.NextRequest(request, {\n        headers: requestHeaders\n    });\n    // Process the request\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n        request: enhancedRequest\n    });\n    // Add correlation headers to the response\n    Object.entries(correlationHeaders).forEach(([key, value])=>{\n        if (value) {\n            response.headers.set(key, value);\n        }\n    });\n    // Add additional response headers for tracking\n    response.headers.set('X-Request-ID', _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.getCurrentContext()?.requestId || '');\n    response.headers.set('X-Span-ID', _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.getCurrentContext()?.spanId || '');\n    response.headers.set('X-Trace-ID', _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.getCurrentContext()?.traceId || '');\n    // Log the request with correlation context\n    const currentContext = _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.getCurrentContext();\n    if (currentContext) {\n        // Only log for non-asset requests to avoid noise\n        if (!request.nextUrl.pathname.startsWith('/_next/') && !request.nextUrl.pathname.startsWith('/favicon.ico') && !request.nextUrl.pathname.startsWith('/api/health')) {\n            _lib_correlation_id__WEBPACK_IMPORTED_MODULE_1__.correlationIDManager.logContext(currentContext, 'info');\n        }\n    }\n    return response;\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     */ '/((?!api|_next/static|_next/image|favicon.ico).*)'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RDtBQUNJO0FBRXBELFNBQVNHLFdBQVdDLE9BQW9CO0lBQzdDLHVEQUF1RDtJQUN2RCxNQUFNQyxVQUFVQyxPQUFPQyxXQUFXLENBQUNILFFBQVFDLE9BQU8sQ0FBQ0csT0FBTztJQUMxRCxNQUFNQyxxQkFBcUJQLHFFQUFvQkEsQ0FBQ1Esa0JBQWtCLENBQUNMO0lBRW5FLCtDQUErQztJQUMvQyxJQUFJLENBQUNJLG9CQUFvQjtRQUN2QlAscUVBQW9CQSxDQUFDUyxlQUFlLENBQ2xDQyxXQUNBQSxXQUNBQSxXQUNBQSxXQUNBO1lBQ0VDLFdBQVc7WUFDWEMsTUFBTVYsUUFBUVcsT0FBTyxDQUFDQyxRQUFRO1lBQzlCQyxRQUFRYixRQUFRYSxNQUFNO1lBQ3RCQyxXQUFXYixPQUFPLENBQUMsYUFBYTtZQUNoQ2MsU0FBU2QsT0FBTyxDQUFDLFVBQVU7UUFDN0I7SUFFSjtJQUVBLG1EQUFtRDtJQUNuRCxNQUFNZSxpQkFBaUIsSUFBSUMsUUFBUWpCLFFBQVFDLE9BQU87SUFDbEQsTUFBTWlCLHFCQUFxQnBCLHFFQUFvQkEsQ0FBQ3FCLFVBQVU7SUFFMUQseUNBQXlDO0lBQ3pDakIsT0FBT0UsT0FBTyxDQUFDYyxvQkFBb0JFLE9BQU8sQ0FBQyxDQUFDLENBQUNDLEtBQUtDLE1BQU07UUFDdEQsSUFBSUEsT0FBTztZQUNUTixlQUFlTyxHQUFHLENBQUNGLEtBQUtDO1FBQzFCO0lBQ0Y7SUFFQSxnREFBZ0Q7SUFDaEQsTUFBTUUsa0JBQWtCLElBQUk1QixvREFBV0EsQ0FBQ0ksU0FBUztRQUMvQ0MsU0FBU2U7SUFDWDtJQUVBLHNCQUFzQjtJQUN0QixNQUFNUyxXQUFXNUIscURBQVlBLENBQUM2QixJQUFJLENBQUM7UUFDakMxQixTQUFTd0I7SUFDWDtJQUVBLDBDQUEwQztJQUMxQ3RCLE9BQU9FLE9BQU8sQ0FBQ2Msb0JBQW9CRSxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLQyxNQUFNO1FBQ3RELElBQUlBLE9BQU87WUFDVEcsU0FBU3hCLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQ0YsS0FBS0M7UUFDNUI7SUFDRjtJQUVBLCtDQUErQztJQUMvQ0csU0FBU3hCLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0J6QixxRUFBb0JBLENBQUM2QixpQkFBaUIsSUFBSUMsYUFBYTtJQUM1RkgsU0FBU3hCLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxhQUFhekIscUVBQW9CQSxDQUFDNkIsaUJBQWlCLElBQUlFLFVBQVU7SUFDdEZKLFNBQVN4QixPQUFPLENBQUNzQixHQUFHLENBQUMsY0FBY3pCLHFFQUFvQkEsQ0FBQzZCLGlCQUFpQixJQUFJRyxXQUFXO0lBRXhGLDJDQUEyQztJQUMzQyxNQUFNQyxpQkFBaUJqQyxxRUFBb0JBLENBQUM2QixpQkFBaUI7SUFDN0QsSUFBSUksZ0JBQWdCO1FBQ2xCLGlEQUFpRDtRQUNqRCxJQUFJLENBQUMvQixRQUFRVyxPQUFPLENBQUNDLFFBQVEsQ0FBQ29CLFVBQVUsQ0FBQyxjQUNyQyxDQUFDaEMsUUFBUVcsT0FBTyxDQUFDQyxRQUFRLENBQUNvQixVQUFVLENBQUMsbUJBQ3JDLENBQUNoQyxRQUFRVyxPQUFPLENBQUNDLFFBQVEsQ0FBQ29CLFVBQVUsQ0FBQyxnQkFBZ0I7WUFDdkRsQyxxRUFBb0JBLENBQUNtQyxVQUFVLENBQUNGLGdCQUFnQjtRQUNsRDtJQUNGO0lBRUEsT0FBT047QUFDVDtBQUVPLE1BQU1TLFNBQVM7SUFDcEJDLFNBQVM7UUFDUDs7Ozs7O0tBTUMsR0FDRDtLQUNEO0FBQ0gsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL21hY21pbmkvRG9jdW1lbnRzL1Byb2plY3RzL1NhYVMgRmFjdG9yeS91aS9uZXh0anMvc3JjL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY29ycmVsYXRpb25JRE1hbmFnZXIgfSBmcm9tICcuL2xpYi9jb3JyZWxhdGlvbi1pZCdcblxuZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgLy8gRXh0cmFjdCBjb3JyZWxhdGlvbiBJRCBmcm9tIGluY29taW5nIHJlcXVlc3QgaGVhZGVyc1xuICBjb25zdCBoZWFkZXJzID0gT2JqZWN0LmZyb21FbnRyaWVzKHJlcXVlc3QuaGVhZGVycy5lbnRyaWVzKCkpXG4gIGNvbnN0IGNvcnJlbGF0aW9uQ29udGV4dCA9IGNvcnJlbGF0aW9uSURNYW5hZ2VyLmV4dHJhY3RGcm9tSGVhZGVycyhoZWFkZXJzKVxuICBcbiAgLy8gSWYgbm8gY29ycmVsYXRpb24gY29udGV4dCBleGlzdHMsIGNyZWF0ZSBvbmVcbiAgaWYgKCFjb3JyZWxhdGlvbkNvbnRleHQpIHtcbiAgICBjb3JyZWxhdGlvbklETWFuYWdlci5nZW5lcmF0ZUNvbnRleHQoXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB7IFxuICAgICAgICBvcGVyYXRpb246ICdodHRwX3JlcXVlc3QnLCBcbiAgICAgICAgcGF0aDogcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLFxuICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuICAgICAgICB1c2VyQWdlbnQ6IGhlYWRlcnNbJ3VzZXItYWdlbnQnXSxcbiAgICAgICAgcmVmZXJlcjogaGVhZGVyc1sncmVmZXJlciddXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgLy8gQ2xvbmUgdGhlIHJlcXVlc3QgaGVhZGVycyB0byBhZGQgY29ycmVsYXRpb24gSURzXG4gIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKVxuICBjb25zdCBjb3JyZWxhdGlvbkhlYWRlcnMgPSBjb3JyZWxhdGlvbklETWFuYWdlci5nZXRIZWFkZXJzKClcbiAgXG4gIC8vIEFkZCBjb3JyZWxhdGlvbiBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gIE9iamVjdC5lbnRyaWVzKGNvcnJlbGF0aW9uSGVhZGVycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICByZXF1ZXN0SGVhZGVycy5zZXQoa2V5LCB2YWx1ZSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gQ3JlYXRlIGEgbmV3IHJlcXVlc3Qgd2l0aCBjb3JyZWxhdGlvbiBoZWFkZXJzXG4gIGNvbnN0IGVuaGFuY2VkUmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdChyZXF1ZXN0LCB7XG4gICAgaGVhZGVyczogcmVxdWVzdEhlYWRlcnNcbiAgfSlcblxuICAvLyBQcm9jZXNzIHRoZSByZXF1ZXN0XG4gIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xuICAgIHJlcXVlc3Q6IGVuaGFuY2VkUmVxdWVzdFxuICB9KVxuXG4gIC8vIEFkZCBjb3JyZWxhdGlvbiBoZWFkZXJzIHRvIHRoZSByZXNwb25zZVxuICBPYmplY3QuZW50cmllcyhjb3JyZWxhdGlvbkhlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSlcbiAgICB9XG4gIH0pXG5cbiAgLy8gQWRkIGFkZGl0aW9uYWwgcmVzcG9uc2UgaGVhZGVycyBmb3IgdHJhY2tpbmdcbiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtUmVxdWVzdC1JRCcsIGNvcnJlbGF0aW9uSURNYW5hZ2VyLmdldEN1cnJlbnRDb250ZXh0KCk/LnJlcXVlc3RJZCB8fCAnJylcbiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtU3Bhbi1JRCcsIGNvcnJlbGF0aW9uSURNYW5hZ2VyLmdldEN1cnJlbnRDb250ZXh0KCk/LnNwYW5JZCB8fCAnJylcbiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtVHJhY2UtSUQnLCBjb3JyZWxhdGlvbklETWFuYWdlci5nZXRDdXJyZW50Q29udGV4dCgpPy50cmFjZUlkIHx8ICcnKVxuXG4gIC8vIExvZyB0aGUgcmVxdWVzdCB3aXRoIGNvcnJlbGF0aW9uIGNvbnRleHRcbiAgY29uc3QgY3VycmVudENvbnRleHQgPSBjb3JyZWxhdGlvbklETWFuYWdlci5nZXRDdXJyZW50Q29udGV4dCgpXG4gIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgIC8vIE9ubHkgbG9nIGZvciBub24tYXNzZXQgcmVxdWVzdHMgdG8gYXZvaWQgbm9pc2VcbiAgICBpZiAoIXJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvX25leHQvJykgJiYgXG4gICAgICAgICFyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2Zhdmljb24uaWNvJykgJiZcbiAgICAgICAgIXJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL2hlYWx0aCcpKSB7XG4gICAgICBjb3JyZWxhdGlvbklETWFuYWdlci5sb2dDb250ZXh0KGN1cnJlbnRDb250ZXh0LCAnaW5mbycpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlXG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFtcbiAgICAvKlxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgc3RhcnRpbmcgd2l0aDpcbiAgICAgKiAtIGFwaSAoQVBJIHJvdXRlcylcbiAgICAgKiAtIF9uZXh0L3N0YXRpYyAoc3RhdGljIGZpbGVzKVxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcbiAgICAgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXG4gICAgICovXG4gICAgJy8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljbykuKiknLFxuICBdLFxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXF1ZXN0IiwiTmV4dFJlc3BvbnNlIiwiY29ycmVsYXRpb25JRE1hbmFnZXIiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJjb3JyZWxhdGlvbkNvbnRleHQiLCJleHRyYWN0RnJvbUhlYWRlcnMiLCJnZW5lcmF0ZUNvbnRleHQiLCJ1bmRlZmluZWQiLCJvcGVyYXRpb24iLCJwYXRoIiwibmV4dFVybCIsInBhdGhuYW1lIiwibWV0aG9kIiwidXNlckFnZW50IiwicmVmZXJlciIsInJlcXVlc3RIZWFkZXJzIiwiSGVhZGVycyIsImNvcnJlbGF0aW9uSGVhZGVycyIsImdldEhlYWRlcnMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJzZXQiLCJlbmhhbmNlZFJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJnZXRDdXJyZW50Q29udGV4dCIsInJlcXVlc3RJZCIsInNwYW5JZCIsInRyYWNlSWQiLCJjdXJyZW50Q29udGV4dCIsInN0YXJ0c1dpdGgiLCJsb2dDb250ZXh0IiwiY29uZmlnIiwibWF0Y2hlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});